services:
  discord-bot:
    build: .
    container_name: alfred_js_bot
    restart: always
    
    volumes:
      # Keep these lines exactly as they are
      - /home/psychopathy/alfred-js/.env:/app/.env
      - /home/psychopathy/alfred-js/balances.db:/app/balances.db

    # REPLACE THE PREVIOUS COMMAND WITH THIS:
    # "set -a" automatically exports all variables defined in the file.
    # ". /app/.env" reads the file safely (handling quotes and comments correctly).
    command: >
      sh -c "set -a && . /app/.env && set +a && npm start"
